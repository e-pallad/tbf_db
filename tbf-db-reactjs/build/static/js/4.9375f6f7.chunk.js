(this["webpackJsonptbf-db-reactjs"]=this["webpackJsonptbf-db-reactjs"]||[]).push([[4],{49:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var n=a(37),r=a.n(n),i=a(1),s=a(2),l=a(13),c=a(4),d=a(3),o=a(39),u=a(0),p=a.n(u),h=a(40);a(49),a(50),a(51);function b(e,t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(r.a.mark((function e(t,a){var n,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://tbf-db-backend.ep-webdesign.de/updateTable.php",(n=new FormData).append("table",a),n.append("data",JSON.stringify(t)),i={method:"POST",body:n},e.prev=5,e.next=8,fetch("https://tbf-db-backend.ep-webdesign.de/updateTable.php",i);case 8:if((s=e.sent).ok){e.next=13;break}throw Error(s.statusText);case 13:return e.abrupt("return",s);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}var m=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onGridReady=function(e){n.gridApi=e.api,n.gridColumnApi=e.columnApi;var t=[];n.gridColumnApi.getAllColumns().forEach((function(e){t.push(e.colId)})),e.columnApi.autoSizeColumns(t)},n.state={editType:"fullRow",defaultColDef:{sortable:!0,editable:!0,filter:!0,resizable:!0},table:n.props.table},n.onGridReady=n.onGridReady.bind(Object(l.a)(n)),n.dataChanged=n.dataChanged.bind(Object(l.a)(n)),n.getMaxTBFID=n.getMaxTBFID.bind(Object(l.a)(n)),n.onAddRow=n.onAddRow.bind(Object(l.a)(n)),n}return Object(s.a)(a,[{key:"getMaxTBFID",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://tbf-db-backend.ep-webdesign.de/getMaxTBFID.php").then((function(e){return e.json()})).then((function(e){t.setState({maxTBFID:parseInt(e)})}),(function(e){t.setState({error:e})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onAddRow",value:function(){var e=Object(o.a)(r.a.mark((function e(){var t=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.maxTBFID){e.next=3;break}return e.next=3,this.getMaxTBFID();case 3:this.setState({maxTBFID:this.state.maxTBFID+1},(function(){console.log(t.state.maxTBFID),t.gridApi.applyTransaction({add:[{TBF_ID:t.state.maxTBFID}]})}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dataChanged",value:function(e){var t=this;if("RI-TBF_SEF_Elektroangaben"===this.state.table){var a=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tbf-db-backend.ep-webdesign.de/getTypicalMskValues.php");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(e.data),a().then((function(a){var n=a.find((function(t){return t[0]===e.data["Typical Nr. MSK"]}));n?(e.data["Anzahl AI"]=parseInt(n[4]),e.data["Anzahl AO"]=parseInt(n[5]),e.data["Anzahl DI"]=parseInt(n[2]),e.data["Anzahl DO"]=parseInt(n[3])):(e.data["Anzahl AI"]=null,e.data["Anzahl AO"]=null,e.data["Anzahl DI"]=null,e.data["Anzahl DO"]=null),b(e.data,t.state.table)}))}else b(e.data,this.state.table)}},{key:"render",value:function(){var e,t=this.props.tableData,a=this.state.table,n=t.slice(0,1).map((function(e){return e.map((function(e){return e.cellEditor&&e.cellEditorParams?{headerName:e.headerName,field:e.field,editable:e.editable,cellEditor:e.cellEditor,cellEditorParams:e.cellEditorParams,refData:e.refData}:{headerName:e.headerName,field:e.field,editable:e.editable}}))})),r=t.slice(1);return e="RI-TBF_SEF_Elektrokomponentenliste"===a?p.a.createElement("button",{className:"btn btn-outline-success mb-2",onClick:this.onAddRow},"Zeile hinzuf\xfcgen"):null,p.a.createElement("div",{id:"grid",className:"p-0 overflow-hidden w-100 h-100"},p.a.createElement("nav",{className:"navbar navbar-light bg-light"},p.a.createElement("h2",{className:"navbar-brand"},a),e),p.a.createElement("div",{className:"ag-theme-alpine",style:{height:"calc(100% - 60px)",width:"100%"}},p.a.createElement(h.AgGridReact,{columnDefs:n[0],defaultColDef:this.state.defaultColDef,rowData:r,editType:this.state.editType,pagination:!0,suppressFieldDotNotation:!0,onRowValueChanged:this.dataChanged,onGridReady:this.onGridReady})))}}]),a}(u.Component)}}]);
//# sourceMappingURL=4.9375f6f7.chunk.js.map